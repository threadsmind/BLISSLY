var Blissly=new Object({isPlaying:!1,doLogging:!1,isInit:!1,instruments:{root:null,noise:null,synths:[]},sends:{root:{},noise:null,synths:[]},init:function(s){null==s&&(s=!1),this.doLogging=s,Constants.init(),Visual.init(this),this.instruments.root=Instruments.makeRoot(),this.instruments.root.chain(Tone.Master),this.sends.root={crush:this.instruments.root.send("crush",-12),reverb:this.instruments.root.send("reverb",0),vibrato:this.instruments.root.send("vibrato",-6)},this.instruments.noise=Instruments.makeNoise(),this.instruments.noise.chain(Tone.Master);for(var t=Random.generateRandomNumber(Constants.minimumSynths,Constants.maximumSynths),n=0;n<t;)this.instruments.synths.push(Instruments.makeSynth()),this.instruments.synths[n].chain(Tone.Master),this.sends.synths[n]={reverb:this.instruments.synths[n].send("reverb",-12),chorus:this.instruments.synths[n].send("chorus",-6)},n++;Tone.Master.chain(Master.eq,Master.midHighCut,Master.hpFilter,Master.lpFilter,Master.compressor,Master.limiter),Tone.Master.volume=-24,this.isInit=!0,Visual.display()},togglePlay:function(){this.isInit&&(this.isPlaying?this.stop(this):this.play(this))},play:function(e){Visual.play();new Tone.Loop(function(s){for(var t in e.instruments.noise.triggerAttackRelease(Constants.loopLength,s,Random.generateRandomNumber(2,3)/10),e.instruments.root.triggerAttackRelease(Constants.scale[0]+"1",Constants.loopLength-1+"m",s+1,Random.generateRandomNumber(2,3)/10),e.instruments.synths){var n=parseInt(t)+2;e.instruments.synths[t].triggerAttackRelease(Constants.scale[Random.generateRandomValue(Constants.scale.length)]+n,Constants.loopLength-2+"m",s+1.5,Random.generateRandomNumber(5,13-2*parseInt(t))/100),console.log(Constants.loopLength+"m"),console.log(Constants.loopLength-2+"m")}},Constants.loopLength).start(0);Tone.Transport.start("+0.2"),e.isPlaying=!0,Util.log("PLAYING")},stop:function(s){for(var t in Visual.stop(),Tone.Transport.stop(),s.instruments.root.triggerRelease(),s.instruments.noise.triggerRelease(),s.instruments.synths)s.instruments.synths[t].triggerRelease();s.isPlaying=!1,Util.log("STOPPING")}});